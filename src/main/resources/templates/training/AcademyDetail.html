<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>AcademyDetail</title>
	
<link rel="stylesheet" href="/css/RRAcademyDetail.css"> 
	
</head>

<style>
	
	body {
		font-family: 'Segoe UI', Tahoma;
		margin: 0;
		background-color: #f4f7f9;
		padding-top: 100px;
	}

	
	 .card_detail {
	      display: block;

	  }

	.up_left {
		width: 200px;
		padding-left: 0;
	}

	.up_right{
		flex: 1;
		padding-left: 200px;
		font-size: larger;
	}
	

	  .down_left {
	      display: flex;
	  }

	 .down_right, 
	 .down_left  {
	      flex: 1;
	     padding-left:10px;

	 }

	  .img_box, .up_left {
	      width: 200px;
	      height: auto;
	  }


	  .text_pr {
	      padding-left: 100px;
	  }

	  .detail_in {
	      display: flex;
	      padding-top: 50px;
	      padding-left: 20px;
		  align-items: flex-start;
	  }



	/*수강내역 모달*/

	/*모달전체 배경*/

	.modal {
		display: none;/*기본숨김*/
		position: fixed;
		z-index: 1000;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0,0,0,0.5);
		display: flex;
		justify-content: center;
		align-items: center;
	}

	/*모달 내부 내용*/
	.modal-content {
		position: relative;
		background-color: #fff;
		padding: 20px;
		border-radius: 8px;
		width: 400px;
		max-width: 90%;
		text-align: center;
		box-shadow: 0 4px 8px rgba(0,0,0,0.2);	
		
	}

	/*x버튼*/
	.modal .close {
		position: absolute;
		top: 10px;
		right: 15px;
		font-size: 20px;
		cursor: pointer;
		
	}

	/*확인버튼*/
	#modalConfirm {
	 margin-top: 15px;
	 padding: 8px 20px;
	 font-size: 16px;
	 cursor: pointer;	
		}

.enroll-content {
	text-align: left;
}	


</style>


<body>
	<div th:replace="fragment/header :: headerDiv"></div>

	<div class="card_detail" th:attr="data-id=${cId.id}">

		<div class="detail_in">
			<div class="up_left">
				<img th:src="${#strings.isEmpty(cId.prphotoNew) ?
								             'https://hk-dalligo-images-2025.s3.ap-southeast-2.amazonaws.com/default/ma_s1.GIF'
								             : cId.prphotoNew}">
			</div>

			<div class="up_right">
				<span>

					<h3 th:text="${cId.title + '(' +cId.location+ ')' + cId.selectDay }"> </h3>
					<h3 th:text="${cId.startDate +'/'+ cId.price+'원'}"> </h3>
					<button type="button" id="enrollBtn">수강신청</button>
				</span>

				<!--모달배경-->
				<div id="enrollModal" class="modal" style="display: none">
					<!--모달내용-->
					<div class="modal-content">
						<span class="close">&times;</span> <!--X 버튼으로 닫기-->
				<!--	<h2 th:text="${user.name}"> 님 신청은 다음과 같습니다. </h2>	
						<h2 > 유느님 신청은 다음과 같습니다. </h2>	-->		
						<h2 th:if="${!isGuest && user!=null}" th:text="${user.name}+'님 신청은 다음과 같습니다'">신청정보</h2>					
						<h2 th:if="${isGuest}">회원만 신청할 수 있습니다.</h2>
						<div class="enroll-content" th:if="${!isGuest}">									
							<p>신청과정 : <span th:text ="${cId.title}"></span> </p>
							<p>트레이너 : <span th:text ="${tvo.name+'강사님'}"> </span>	</p>
							<p>수강시작 : <span th:text ="${cId.startDate}"> </span></p>	
							<p>수강장소 : <span th:text ="${cId.place}"></span> </p>	
							<p>수강료 : <span th:text ="${cId.price+'원'}"></span></p>	
							</div>						
						<button id="modalConfirm" th:if="${!isGuest}">확인</button>
					</div>
				</div> 	<!--모달배경-->
				
			</div>
		</div>

		<div class="detail_in">
			<div class="down_left">
				<div class="img_box">
					<img th:src="${tvo.photoNew}">
				</div>
				
				<div class="text_pr">
					<h3 th:text="${tvo.name}"> </h3>

					<ul>
						<li th:each="item : ${historyList}" th:text="${item}">
						</li>
					</ul>
					
			<!--		<a th:href="@{/trainer/ad/del/{id}(id=${cId.id}, token=${cId.deleteToken})}">
								    <button> 강좌삭제</button>					
					</a>-->
					
				</div>

			</div>

			<div class="down_right">
				<div class="text_pr">
					<p>
					<h1 th:text=${cId.location}></h1>
					</p>
					<p>
					<h1 th:text="${cId.title}"></h1>
					</p>

					<p>훈련시간 : <span th:text="${dayStr}+'  '+${timeStr}"></span>~ </p>
					<p>훈련장소 :<span th:text="${cId.location}"></span></p>
					<p>제공사항 : <span th:text="${cId.supportItem}"></span></p>

				</div>
			</div>
		</div>
	</div> <!--card_detail-->

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			//버튼, 모달, 닫기버튼, 확인버튼 가져오기
			const enrollBtn = document.getElementById("enrollBtn");
			const modal = document.getElementById("enrollModal");
			const closeBtn = document.querySelector(".close");
			const confirmBtn = document.getElementById("modalConfirm");

			//클릭시 모달보이기
			enrollBtn.addEventListener("click", () => {
				modal.style.display = "flex"
			})


			closeBtn.addEventListener("click", () => {
				modal.style.display = "none";
			});

			// 3) 확인 버튼 클릭 시 모달 닫고 화면 돌아가기
			confirmBtn.addEventListener("click", () => {
				modal.style.display = "none";
				window.location.href = "/academy"; // 원하는 홈페이지 주소로 이동
			});

			// 4) 모달 배경 클릭 시 닫기
			window.addEventListener("click", (e) => {
				if (e.target == modal) {
					modal.style.display = "none";
				}
			});
		});

	</script>



</body>

</html>